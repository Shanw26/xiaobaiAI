# é˜¿é‡Œäº‘ OSS ä¸Šä¼ è„šæœ¬ä½¿ç”¨æŒ‡å—

> **ç”¨é€”**: è‡ªåŠ¨ä¸Šä¼ å®‰è£…åŒ…åˆ°é˜¿é‡Œäº‘ OSSï¼Œæå‡å›½å†…ç”¨æˆ·ä¸‹è½½é€Ÿåº¦
> **åˆ›å»ºæ—¶é—´**: 2026-01-07

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ¬¡é…ç½®ï¼ˆ5åˆ†é’Ÿï¼‰

#### 1. å¼€é€šé˜¿é‡Œäº‘ OSS

1. è®¿é—® [é˜¿é‡Œäº‘ OSS æ§åˆ¶å°](https://oss.console.aliyun.com/)
2. åˆ›å»º Bucketï¼š
   - **Bucket åç§°**: `xiaobai-ai-releases`ï¼ˆæˆ–è‡ªå®šä¹‰ï¼‰
   - **åœ°åŸŸ**: åä¸œ1ï¼ˆæ­å·ï¼‰- å›½å†…è®¿é—®å¿«
   - **å­˜å‚¨ç±»å‹**: æ ‡å‡†å­˜å‚¨
   - **è®¿é—®æƒé™**: **å…¬å…±è¯»**ï¼ˆé‡è¦ï¼ï¼‰

#### 2. åˆ›å»º RAM å­è´¦å·ï¼ˆæ¨èï¼‰

1. è®¿é—® [é˜¿é‡Œäº‘ RAM æ§åˆ¶å°](https://ram.console.aliyun.com/)
2. åˆ›å»ºç”¨æˆ·ï¼š
   - **ç™»å½•åç§°**: `xiaobai-ai-uploader`
   - **è®¿é—®æ–¹å¼**: é€‰æ‹© **ç¼–ç¨‹è®¿é—®**
3. åˆ›å»ºåä¿å­˜ **AccessKey ID** å’Œ **AccessKey Secret**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰
4. æ·»åŠ æƒé™ï¼š
   - æœç´¢ `AliyunOSSFullAccess`ï¼ˆå®Œæ•´æƒé™ï¼‰
   - æˆ–åˆ›å»ºè‡ªå®šä¹‰æƒé™ï¼ˆæœ€å°æƒé™åŸåˆ™ï¼‰

#### 3. é…ç½®æœ¬åœ°ç¯å¢ƒ

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥é˜¿é‡Œäº‘ AccessKey
nano .env  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨
```

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```bash
ALI_OSS_ACCESS_KEY_ID=LTAI5tXXXXXXXXXXXXXX
ALI_OSS_ACCESS_KEY_SECRET=XXXXXXXXXXXXXXXXXXXXXXXX
```

#### 4. ä¿®æ”¹ä¸Šä¼ è„šæœ¬é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½¿ç”¨ä¸åŒçš„ Bucket åç§°æˆ–åœ°åŸŸï¼Œä¿®æ”¹ `scripts/upload-to-oss.js`ï¼š

```javascript
const config = {
  region: 'oss-cn-hangzhou',  // ä¿®æ”¹ä¸ºä½ çš„åœ°åŸŸ
  bucket: 'your-bucket-name',  // ä¿®æ”¹ä¸ºä½ çš„ Bucket åç§°
  // ...
};
```

---

## ğŸ“¦ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼1: ä¸€é”®å‘å¸ƒï¼ˆæ¨èï¼‰

```bash
# æ„å»º macOS å®‰è£…åŒ… + ä¸Šä¼ åˆ°é˜¿é‡Œäº‘ OSS
npm run release:oss
```

### æ–¹å¼2: åˆ†æ­¥æ‰§è¡Œ

```bash
# æ­¥éª¤1: æ„å»º macOS å®‰è£…åŒ…
npm run dist:mac

# æ­¥éª¤2: ä¸Šä¼ åˆ°é˜¿é‡Œäº‘ OSS
npm run upload:oss
```

### æ–¹å¼3: å•ç‹¬ä¸Šä¼ å·²æœ‰ç‰ˆæœ¬

```bash
# å¦‚æœå·²ç»æ„å»ºè¿‡ï¼Œç›´æ¥ä¸Šä¼ 
npm run upload:oss
```

---

## âœ… éªŒè¯ä¸Šä¼ æˆåŠŸ

### 1. æ£€æŸ¥æ§åˆ¶å°è¾“å‡º

æˆåŠŸä¸Šä¼ åä¼šçœ‹åˆ°ï¼š

```
ğŸš€ å°ç™½AI - é˜¿é‡Œäº‘ OSS ä¸Šä¼ å·¥å…·
ç‰ˆæœ¬: 2.7.3
Bucket: xiaobai-ai-releases
åœ°åŸŸ: oss-cn-hangzhou
============================================================

ğŸ å¼€å§‹ä¸Šä¼  macOS ç‰ˆæœ¬ 2.7.3
ğŸ“¤ ä¸Šä¼ : xiaobai-ai-2.7.3.dmg â†’ mac/xiaobai-ai-2.7.3.dmg
âœ… ä¸Šä¼ æˆåŠŸ: https://xiaobai-ai-releases.oss-cn-hangzhou.aliyuncs.com/mac/xiaobai-ai-2.7.3.dmg
...

âœ… ä¸Šä¼ å®Œæˆï¼
   macOS: 4 ä¸ªæ–‡ä»¶
   Windows: 0 ä¸ªæ–‡ä»¶
   æ€»è®¡: 4 ä¸ªæ–‡ä»¶

ğŸ“¦ ä¸‹è½½é“¾æ¥:
   macOS: https://xiaobai-ai-releases.oss-cn-hangzhou.aliyuncs.com/mac/
```

### 2. è®¿é—® OSS æ§åˆ¶å°éªŒè¯

1. è®¿é—® [OSS æ§åˆ¶å°](https://oss.console.aliyun.com/)
2. æ‰¾åˆ°ä½ çš„ Bucket
3. æŸ¥çœ‹ `mac/` ç›®å½•ï¼Œç¡®è®¤æ–‡ä»¶å·²ä¸Šä¼ 
4. æŸ¥çœ‹ `mac/latest-mac.yml` æ˜¯å¦å­˜åœ¨

### 3. æµ‹è¯•ä¸‹è½½é“¾æ¥

```bash
# æµ‹è¯• YAML æ–‡ä»¶
curl -I https://xiaobai-ai-releases.oss-cn-hangzhou.aliyuncs.com/mac/latest-mac.yml

# æµ‹è¯•å®‰è£…åŒ…ä¸‹è½½
curl -I https://xiaobai-ai-releases.oss-cn-hangzhou.aliyuncs.com/mac/xiaobai-ai-2.7.3.dmg
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: æç¤º"è¯·è®¾ç½®ç¯å¢ƒå˜é‡"

**åŸå› **: `.env` æ–‡ä»¶ä¸­ç¼ºå°‘ AccessKey

**è§£å†³æ–¹æ³•**:
```bash
# æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .env

# æŸ¥çœ‹ç¯å¢ƒå˜é‡
cat .env | grep ALI_OSS

# ç¡®ä¿åŒ…å«ä»¥ä¸‹ä¸¤è¡Œï¼š
# ALI_OSS_ACCESS_KEY_ID=your_key
# ALI_OSS_ACCESS_KEY_SECRET=your_secret
```

### Q2: ä¸Šä¼ å¤±è´¥ "AccessDenied"

**åŸå› **: AccessKey é”™è¯¯æˆ–æ²¡æœ‰æƒé™

**è§£å†³æ–¹æ³•**:
1. æ£€æŸ¥ AccessKey æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ RAM ç”¨æˆ·æœ‰ OSS æƒé™ï¼š
   - æ‰“å¼€ RAM æ§åˆ¶å°
   - æ‰¾åˆ°ç”¨æˆ· `xiaobai-ai-uploader`
   - æ·»åŠ æƒé™ `AliyunOSSFullAccess`

### Q3: æç¤º "Bucket ä¸å­˜åœ¨"

**åŸå› **: Bucket åç§°æˆ–åœ°åŸŸé…ç½®é”™è¯¯

**è§£å†³æ–¹æ³•**:
1. è®¿é—® OSS æ§åˆ¶å°ï¼Œç¡®è®¤ Bucket åç§°
2. ä¿®æ”¹ `scripts/upload-to-oss.js` ä¸­çš„é…ç½®ï¼š
   ```javascript
   const config = {
     bucket: 'your-actual-bucket-name',  // ä¿®æ”¹è¿™é‡Œ
     region: 'oss-cn-hangzhou',  // ä¿®æ”¹è¿™é‡Œ
     // ...
   };
   ```

### Q4: ä¸Šä¼ æˆåŠŸä½†ç”¨æˆ·æ— æ³•ä¸‹è½½

**åŸå› **: Bucket æƒé™ä¸æ˜¯"å…¬å…±è¯»"

**è§£å†³æ–¹æ³•**:
1. è®¿é—® OSS æ§åˆ¶å°
2. æ‰¾åˆ°ä½ çš„ Bucket
3. ç‚¹å‡»"æƒé™ç®¡ç†" â†’ "è¯»å†™æƒé™"
4. è®¾ç½®ä¸ºï¼š**å…¬å…±è¯»**

### Q5: ä¸Šä¼ é€Ÿåº¦å¾ˆæ…¢

**åŸå› **: ç½‘ç»œé—®é¢˜æˆ–åœ°åŸŸé€‰æ‹©ä¸å½“

**è§£å†³æ–¹æ³•**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ä¿®æ”¹è„šæœ¬é…ç½®ï¼Œä½¿ç”¨å°±è¿‘çš„åœ°åŸŸï¼š
   - åä¸œ1ï¼ˆæ­å·ï¼‰: `oss-cn-hangzhou` - æ¨è
   - ååŒ—2ï¼ˆåŒ—äº¬ï¼‰: `oss-cn-beijing`
   - åå—1ï¼ˆæ·±åœ³ï¼‰: `oss-cn-shenzhen`

---

## ğŸ¯ è‡ªåŠ¨æ›´æ–°é…ç½®

ä¸Šä¼ æˆåŠŸåï¼Œåº”ç”¨ä¼šè‡ªåŠ¨ä½¿ç”¨é˜¿é‡Œäº‘ OSS è¿›è¡Œæ›´æ–°ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ã€‚

### å¼€å‘ç¯å¢ƒ
```bash
npm run dev  # ä½¿ç”¨ GitHubï¼ˆæ–¹ä¾¿æµ‹è¯•ï¼‰
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
npm run dist:mac  # æ‰“åŒ…åä½¿ç”¨é˜¿é‡Œäº‘ OSS
```

### é…ç½®ä½ç½®

**æ–‡ä»¶**: `electron/main.js`

```javascript
// å¼€å‘ç¯å¢ƒï¼šGitHub
// ç”Ÿäº§ç¯å¢ƒï¼šé˜¿é‡Œäº‘ OSS
const isDev = process.env.NODE_ENV === 'development';

if (isDev) {
  autoUpdater.setFeedURL({
    provider: 'github',
    owner: 'Shanw26',
    repo: 'xiaobaiAI'
  });
} else {
  autoUpdater.setFeedURL({
    provider: 'generic',
    url: 'https://xiaobai-ai-releases.oss-cn-hangzhou.aliyuncs.com/mac/'
  });
}
```

---

## ğŸ“Š æˆæœ¬ä¼°ç®—

### æœˆæˆæœ¬è®¡ç®—

å‡è®¾æ¯æœˆ 1000 æ¬¡ä¸‹è½½ï¼Œæ¯æ¬¡ 150MBï¼š

| é¡¹ç›® | è®¡ç®— | æˆæœ¬ |
|------|------|------|
| OSS å­˜å‚¨ | 5GB Ã— Â¥0.12/GB | Â¥0.60/æœˆ |
| CDN æµé‡ | 150GB Ã— Â¥0.24/GB | Â¥36/æœˆ |
| è¯·æ±‚æ¬¡æ•° | 2000 æ¬¡ï¼ˆå…è´¹ï¼‰ | Â¥0/æœˆ |
| **æ€»è®¡** | | **Â¥36.60/æœˆ** |

### èŠ‚çœæˆæœ¬

é˜¿é‡Œäº‘æ–°ç”¨æˆ·é€šå¸¸æœ‰ï¼š
- OSS å­˜å‚¨ï¼š**å‰ 3 ä¸ªæœˆå…è´¹**
- CDN æµé‡ï¼š**100GB/æœˆ å…è´¹é¢åº¦**

---

## ğŸ” å®‰å…¨å»ºè®®

1. âœ… **ä¸è¦æäº¤ .env æ–‡ä»¶åˆ° Git**ï¼ˆå·²æ·»åŠ åˆ° .gitignoreï¼‰
2. âœ… **ä½¿ç”¨ RAM å­è´¦å·**ï¼Œä¸è¦ä½¿ç”¨ä¸»è´¦å·
3. âœ… **å®šæœŸè½®æ¢ AccessKey**ï¼ˆæ¯3-6ä¸ªæœˆï¼‰
4. âœ… **é™åˆ¶ RAM ç”¨æˆ·æƒé™**ï¼ˆåªç»™ OSS æƒé™ï¼‰
5. âœ… **å¼€å¯ Bucket æ—¥å¿—**ï¼ˆè®°å½•è®¿é—®æƒ…å†µï¼‰

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- [é˜¿é‡Œäº‘ OSS æ–‡æ¡£](https://help.aliyun.com/product/31815.html)
- [ali-oss SDK æ–‡æ¡£](https://www.npmjs.com/package/ali-oss)
- [RAM æƒé™ç®¡ç†](https://help.aliyun.com/document_detail/100676.htm)
- [å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ](../é˜¿é‡Œäº‘OSSéƒ¨ç½²æ–¹æ¡ˆ.md)

---

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥é˜¿é‡Œäº‘ OSS æ§åˆ¶å°
3. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜) éƒ¨åˆ†
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**åˆ›å»ºæ—¶é—´**: 2026-01-07
**ç»´æŠ¤äºº**: Claude Code + æ™“åŠ›
**ç‰ˆæœ¬**: v1.0
